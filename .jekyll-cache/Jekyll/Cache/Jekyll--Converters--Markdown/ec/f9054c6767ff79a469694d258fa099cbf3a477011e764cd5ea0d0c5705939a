I"¬ <p>On the internet we share stuff, Facebook, twitter, email, other socials, and so on. We use some links to custom share links and build it up ourselves. When i built some apps i also  share, usually there is a share functionality. Now what if we want to implement share on a simple way, lets see where we can go with it.</p>

<h3 id="share-api">Share api.</h3>

<p>As usual, the people of the internet have thought of this already. When i searched for a share api there is one, off course. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share">Navigator.share</a> api. Awesome.</p>

<p>This sets us up to share the link using the default share slider you see on phones, where you only have the share types you have set up on your phone or device. Useful and clean!</p>

<h3 id="lets-implement">Lets implement.</h3>

<p>Next up, a simple implementation. Next we need a button on a page.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">class=</span><span class="s">"btn btn-outline-secondary js-share"</span> <span class="na">data-title=</span><span class="s">"This is a title"</span> <span class="na">data-text=</span><span class="s">"This is a text"</span> <span class="na">aria-label=</span><span class="s">"Share this page"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"fa fa-share-alt"</span><span class="nt">&gt;&lt;/i&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>Cool, share button using some font awesome share icon! Lets add some JavaScript.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">share</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="dl">'</span><span class="s1">.js-share</span><span class="dl">'</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">share</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">share</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nb">navigator</span><span class="p">.</span><span class="nx">share</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="nx">share</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="nx">share</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="nx">share</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">url</span> <span class="o">||</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span>
  <span class="p">});</span>

  <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Made a default click listener that listens to a <code class="highlighter-rouge">.js-share</code> class that should be clicked. Note that this uses a <code class="highlighter-rouge">.closest</code> function that can be pesky. More explanations and where i learned about this can be found <a href="https://gomakethings.com/checking-event-target-selectors-with-event-bubbling-in-vanilla-javascript/">here on Chris Ferdinandiâ€™s site</a>.</p>

<p>And run the code! I was on a desktop and clicked frantically to see how it all worked. But it did little. Sad.</p>

<h3 id="can-we-use-that">Can we use that!</h3>

<p>So the next step was to ask the internet if we could use that. <a href="https://caniuse.com/#feat=web-share">Can i use web share api</a>. The answer is no, not yet. Not as built in out of the box. As i said earlier, the share api uses the share dialog as used on phones. And the diagram on <a href="https://caniuse.com">caniuse.com</a> shows mobile browsers only at this point. I read somewhere that macos may be implementing something some time. But not yet. So should we use this, YES!</p>

<h3 id="lets-poly-fill">Lets poly fill.</h3>

<p>Asking the internet some more i found out more people wanted to implement this. So i stumbled upon the <a href="https://github.com/NascHQ/share-api-polyfill">share-api-polyfill</a>. This will add a fallback as we are used on desktops, and implements the same structure as above. So just import the JavaScript to your site and you are good to go.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://unpkg.com/share-api-polyfill/dist/share-min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p>Or install using npm and build it in your JavaScript.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">npm install share-api-polyfill --save</span>
</code></pre></div></div>

<h3 id="done">Done!</h3>

<p>Nice! Now we have a functionality that gives every type of browsing your app a nice way to share. And while the browsers will implement the api sharing will be nicer than ever. In the share poly fill you can also set up some stuff, for your own leisure.</p>

<h3 id="next-up">Next up</h3>

<p>Next up. As on the example of the poly fill the share api returns a promise. So you can also extend it to add more to the share functionality. Thank the person that shares or log in your data collection efforts.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">navigator</span><span class="p">.</span><span class="nx">share</span><span class="p">({</span>
    <span class="p">...</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">_</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Yay, you shared it :)</span><span class="dl">'</span><span class="p">))</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Oh noh! You couldn</span><span class="se">\'</span><span class="s1">t share it! :</span><span class="se">\'</span><span class="s1">(</span><span class="se">\n</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">));</span>
</code></pre></div></div>

<p>Google is also on a way of sharing files this way, you can check that out on the <a href="https://developers.google.com/web/updates/2019/05/web-share-files">Share files with Web Share</a> post on googles page. Could be awesome to share a file to a image editing website as an idea!</p>

<p>Next up is whatever we want it to be.</p>

<p>Enjoy!</p>
:ET